---
isPublished: true
title: "Adding Foreign Keys in PostgreSQL: 4 Methods and Considerations"
date: 2024-08-04
excerpt: "Let’s explore the four common ways to create a foreign key relationship, focusing on their syntax, benefits, and drawbacks."
keywords:
  - Postgresql
  - Databases
authors:
  - name: Florian
    description: Founder
    avatar: /authors/florian.jpg
    twitter: https://twitter.com/florianmartens9
---

Let’s explore the four common ways to create a foreign key relationship, focusing on their syntax, benefits, and drawbacks.

## 1. Inline Foreign Key Definition without Target Column

```sql
CREATE TABLE tests 
( 
   subject_id SERIAL,
   subject_name TEXT,
   highestStudent_id INTEGER REFERENCES students
);
```
In this approach, the foreign key is defined inline with the column declaration. This method lacks explicit detail about the referenced column, which can 
lead to ambiguity.

PostgreSQL will automatically assume that the foreign key should reference the primary key of the referenced table.

If the referenced table has a composite primary key (a primary key that consists of more than one column), 
you must explicitly specify the columns that the foreign key should reference. 

**Advantage:** Concise and integrates well within the column definition.

**Disadvantage:** Less explicit, which can cause confusion if the referenced table has multiple potential primary keys.

## 2. Inline Foreign Key Definition with Target Column
```sql
CREATE TABLE tests 
( 
   subject_id SERIAL,
   subject_name TEXT,
   highestStudent_id INTEGER REFERENCES students (student_id)
);
```
This method also defines the foreign key inline but includes the target column explicitly.

**Advantage:** Clearer specification of the target column, reducing ambiguity.

**Disadvantage:** Slightly longer syntax compared to the previous method.

## 3. Out-of-Line Foreign Key Definition Inside the CREATE TABLE Statement
```sql
CREATE TABLE tests 
( 
  subject_id SERIAL,
  subject_name TEXT,
  highestStudent_id INTEGER, 
  CONSTRAINT fk_tests_students
     FOREIGN KEY (highestStudent_id) 
     REFERENCES students (student_id)
);
```
Defining the foreign key constraint out-of-line allows for a more organized and structured table definition. It separates the foreign 
key constraint from the column definitions, making it easier to manage constraints independently. This approach also allows for 
custom naming of the foreign key constraint.

**Advantage:** Clean separation of column definitions and constraints, with the ability to name the constraint explicitly.

**Disadvantage:** Slightly more verbose and can be less intuitive for simple schemas.

## 4. Out-of-Line Foreign Key Definition with ALTER TABLE Statement
```sql
CREATE TABLE tests 
( 
  subject_id SERIAL,
  subject_name TEXT,
  highestStudent_id INTEGER
);

ALTER TABLE tests 
    ADD CONSTRAINT fk_tests_students
    FOREIGN KEY (highestStudent_id) 
    REFERENCES students (student_id);
```
In this method, the foreign key constraint is added after the table is created using an ALTER TABLE statement. This approach is particularly 
useful when modifying existing tables or when foreign key constraints are defined after the table creation process. Like the previous method, 
it allows for custom constraint names and provides flexibility in managing constraints separately from the initial table definition.

**Advantage:** Flexible, allows for modification of existing tables, and supports custom constraint naming.

**Disadvantage:** More steps involved and less immediate integration with the initial table creation.

## Choosing the Right Method
The choice of method often depends on personal preference and specific use cases. Consistency across your scripts is crucial to maintaining 
clarity and avoiding errors.

Understanding these methods will help you design and maintain your PostgreSQL databases more effectively, ensuring referential 
integrity and clarity in your database schema.